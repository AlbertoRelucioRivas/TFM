<?xml version="1.0" ?>
<robot name="jaguar">
  <joint name="left_track_j" type="fixed">
    <parent link="base_link"/>
    <child link="left_track"/>
    <origin rpy="0      0     0" xyz="0    0.245  0.1"/>
    <axis xyz="0  0  0"/>
    <limit effort="0" lower="0" upper="0" velocity="0"/>
  </joint>
  <joint name="right_track_j" type="fixed">
    <parent link="base_link"/>
    <child link="right_track"/>
    <origin rpy="0      0     0" xyz="0  -0.245     0.1"/>
    <axis xyz="0  0  0"/>
    <limit effort="0" lower="0" upper="0" velocity="0"/>
  </joint>
  <joint name="right_rear_track_j" type="continuous">
    <parent link="base_link"/>
    <child link="right_rear_arm"/>
    <origin rpy="0  0  1.5708" xyz="-0.23  -0.315    0.1"/>
    <axis xyz="1  0  0"/>
    <limit effort="0.0" lower="0.0" upper="0.0" velocity="1.0"/>
  </joint>
  <joint name="left_rear_track_j" type="continuous">
    <parent link="base_link"/>
    <child link="left_rear_arm"/>
    <origin rpy="0  0  1.5708" xyz="-0.23    0.315  0.1"/>
    <axis xyz="1  0  0"/>
    <limit effort="0.0" lower="0.0" upper="0.0" velocity="1.0"/>
  </joint>
  <joint name="right_front_track_j" type="continuous">
    <parent link="base_link"/>
    <child link="right_front_arm"/>
    <origin rpy="0  0  1.5708" xyz="0.23  -0.315   0.1"/>
    <axis xyz="1  0  0"/>
    <limit effort="0.0" lower="0.0" upper="0.0" velocity="1.0"/>
  </joint>
  <joint name="left_front_track_j" type="continuous">
    <parent link="base_link"/>
    <child link="left_front_arm"/>
    <origin rpy="0  0  1.5708" xyz="0.23  0.315  0.1"/>
    <axis xyz="1  0  0"/>
    <limit effort="0.0" lower="0.0" upper="0.0" velocity="1.0"/>
  </joint>
  <link name="base_link">
    <inertial>
      <mass value="13.14"/>
      <origin rpy="1.5708  0      0" xyz="0  0  0"/>
      <inertia ixx="0.17136" ixy="0" ixz="0" iyy="0.544105" iyz="0" izz="0.415662"/>
    </inertial>
    <collision name="base_link_collision">
      <origin rpy="0      0     0" xyz="0   0   0.1"/>
      <geometry>
        <box size="0.6 0.37 0.140"/>
      </geometry>
    </collision>
    <visual name="base_link_visual">
      <origin rpy="0      0     0" xyz="0   0   0.1"/>
      <geometry>
        <box size="0.6 0.37 0.140"/>
      </geometry>
    </visual>
  </link>
  <link name="left_track">
    <inertial>
      <mass value="6.06"/>
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <inertia ixx="0.001818" ixy="0" ixz="0" iyy="0.032554" iyz="0" izz="0.031391"/>
    </inertial>
    <collision name="left_track_collision">
      <origin rpy="1.5708  0      1.5708" xyz="0  0  0"/>
      <geometry>
        <box size="0.06 0.180 0.46"/>
      </geometry>
    </collision>
    <collision name="left_track_collision_1">
      <origin rpy="1.5708  0      0" xyz="0.23  0    0"/>
      <geometry>
        <cylinder length="0.06" radius="0.09"/>
      </geometry>
    </collision>
    <collision name="left_track_collision_2">
      <origin rpy="1.5708  0      0" xyz="-0.23  0    0"/>
      <geometry>
        <cylinder length="0.06" radius="0.09"/>
      </geometry>
    </collision>
    <visual name="left_track_visual">
      <origin rpy="1.5708  0      1.5708" xyz="0  0  0"/>
      <geometry>
        <box size="0.06 0.180 0.46"/>
      </geometry>
    </visual>
    <visual name="left_track_visual_1">
      <origin rpy="1.5708  0      0" xyz="0.23  0    0"/>
      <geometry>
        <cylinder length="0.06" radius="0.09"/>
      </geometry>
    </visual>
    <visual name="left_track_visual_2">
      <origin rpy="1.5708  0      0" xyz="-0.23  0    0"/>
      <geometry>
        <cylinder length="0.06" radius="0.09"/>
      </geometry>
    </visual>
  </link>
  <link name="right_track">
    <inertial>
      <mass value="6.06"/>
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <inertia ixx="0.001818" ixy="0" ixz="0" iyy="0.032554" iyz="0" izz="0.031391"/>
    </inertial>
    <collision name="right_track_collision">
      <origin rpy="1.5708  0      1.5708" xyz="0  0  0"/>
      <geometry>
        <box size="0.06 0.180 0.46"/>
      </geometry>
    </collision>
    <collision name="right_track_collision_1">
      <origin rpy="1.5708  0      0" xyz="0.23  0    0"/>
      <geometry>
        <cylinder length="0.06" radius="0.09"/>
      </geometry>
    </collision>
    <collision name="right_track_collision_2">
      <origin rpy="1.5708  0      0" xyz="-0.23  0    0"/>
      <geometry>
        <cylinder length="0.06" radius="0.09"/>
      </geometry>
    </collision>
    <visual name="right_track_visual">
      <origin rpy="1.5708  0      1.5708" xyz="0  0  0"/>
      <geometry>
        <box size="0.06 0.180 0.46"/>
      </geometry>
    </visual>
    <visual name="right_track_visual_1">
      <origin rpy="1.5708  0      0" xyz="0.23  0    0"/>
      <geometry>
        <cylinder length="0.06" radius="0.09"/>
      </geometry>
    </visual>
    <visual name="right_track_visual_2">
      <origin rpy="1.5708  0      0" xyz="-0.23  0    0"/>
      <geometry>
        <cylinder length="0.06" radius="0.09"/>
      </geometry>
    </visual>
  </link>
  <link name="right_rear_arm">
    <inertial>
      <mass value="1.0"/>
      <origin rpy="1.57  0    1.57" xyz="-0.015  0     0"/>
      <inertia ixx="6.8125e-4" ixy="0" ixz="0" iyy="3.96253e-3" iyz="0" izz="4.53125e-3"/>
    </inertial>
    <collision name="collision_right_rear_arm_wheel_1">
      <origin rpy="3.14159 -1.57079  3.14159" xyz="0     0     0.001"/>
      <geometry>
        <cylinder length=".06" radius=".09"/>
      </geometry>
    </collision>
    <collision name="collision_right_rear_arm_wheel_2">
      <origin rpy="3.14159 -1.57079  3.14159" xyz="0     0.23   0.001"/>
      <geometry>
        <cylinder length=".06" radius=".035"/>
      </geometry>
    </collision>
    <collision name="right_rear_track_collision">
      <origin rpy="-1.3293  0      0" xyz="0       0.12157 -0.0257"/>
      <geometry>
        <box size="0.06 0.07 0.2233"/>
      </geometry>
    </collision>
    <collision name="right_rear_track_collision_2">
      <origin rpy="1.3293  0      0" xyz="0       0.12157  0.0277"/>
      <geometry>
        <box size="0.06 0.07 0.23"/>
      </geometry>
    </collision>
    <visual name="visual">
      <origin rpy="0  0  0" xyz="0     0.115  0.001"/>
      <geometry>
        <box size=".002 .23 .05"/>
      </geometry>
    </visual>
    <visual name="visual_right_rear_arm_wheel_1">
      <origin rpy="3.14159 -1.57079  3.14159" xyz="0     0     0.001"/>
      <geometry>
        <cylinder length=".06" radius=".09"/>
      </geometry>
    </visual>
    <visual name="visual_right_rear_arm_wheel_2">
      <origin rpy="3.14159 -1.57079  3.14159" xyz="0     0.23   0.001"/>
      <geometry>
        <cylinder length=".06" radius=".035"/>
      </geometry>
    </visual>
    <visual name="right_rear_track_visual">
      <origin rpy="1.3293  0      0" xyz="0       0.12157  0.0277"/>
      <geometry>
        <box size="0.06 0.07 0.2233"/>
      </geometry>
    </visual>
    <visual name="right_rear_track_visual_2">
      <origin rpy="-1.3293  0      0" xyz="0       0.12157 -0.0257"/>
      <geometry>
        <box size="0.06 0.07 0.23"/>
      </geometry>
    </visual>
  </link>
  <link name="left_rear_arm">
    <inertial>
      <mass value="1.0"/>
      <origin rpy="1.57  0    1.57" xyz="-0.015  0     0"/>
      <inertia ixx="6.8125e-4" ixy="0" ixz="0" iyy="3.96253e-3" iyz="0" izz="4.53125e-3"/>
    </inertial>
    <collision name="collision_left_rear_arm_wheel_1">
      <origin rpy="3.14159 -1.57079  3.14159" xyz="0     0    -0.001"/>
      <geometry>
        <cylinder length=".06" radius=".09"/>
      </geometry>
    </collision>
    <collision name="collision_left_rear_arm_wheel_2">
      <origin rpy="3.14159 -1.57079  3.14159" xyz="0     0.23  -0.001"/>
      <geometry>
        <cylinder length=".06" radius=".035"/>
      </geometry>
    </collision>
    <collision name="left_rear_track_collision">
      <origin rpy="1.3293  0      0" xyz="0       0.12157  0.0257"/>
      <geometry>
        <box size="0.06 0.07 0.2233"/>
      </geometry>
    </collision>
    <collision name="left_rear_track_collision_2">
      <origin rpy="-1.3293  0      0" xyz="0       0.12157 -0.0277"/>
      <geometry>
        <box size="0.06 0.07 0.23"/>
      </geometry>
    </collision>
    <visual name="visual">
      <origin rpy="0  0  0" xyz="0     0.115 -0.001"/>
      <geometry>
        <box size=".002 .23 .05"/>
      </geometry>
    </visual>
    <visual name="visual_left_rear_arm_wheel_1">
      <origin rpy="3.14159 -1.57079  3.14159" xyz="0     0    -0.001"/>
      <geometry>
        <cylinder length=".06" radius=".09"/>
      </geometry>
    </visual>
    <visual name="visual_left_rear_arm_wheel_2">
      <origin rpy="3.14159 -1.57079  3.14159" xyz="0     0.23  -0.001"/>
      <geometry>
        <cylinder length=".06" radius=".035"/>
      </geometry>
    </visual>
    <visual name="left_rear_track_visual">
      <origin rpy="1.3293  0      0" xyz="0       0.12157  0.0257"/>
      <geometry>
        <box size="0.06 0.07 0.2233"/>
      </geometry>
    </visual>
    <visual name="left_rear_track_visual_2">
      <origin rpy="-1.3293  0      0" xyz="0       0.12157 -0.0277"/>
      <geometry>
        <box size="0.06 0.07 0.23"/>
      </geometry>
    </visual>
  </link>
  <link name="right_front_arm">
    <inertial>
      <mass value="1.0"/>
      <origin rpy="1.57  0    1.57" xyz="-0.015  0     0"/>
      <inertia ixx="6.8125e-4" ixy="0" ixz="0" iyy="3.96253e-3" iyz="0" izz="4.53125e-3"/>
    </inertial>
    <collision name="collision_right_front_arm_wheel_1">
      <origin rpy="3.14159 -1.57079  3.14159" xyz="0     0     0.001"/>
      <geometry>
        <cylinder length=".06" radius=".09"/>
      </geometry>
    </collision>
    <collision name="collision_right_front_arm_wheel_2">
      <origin rpy="3.14159 -1.57079  3.14159" xyz="0    -0.23   0.001"/>
      <geometry>
        <cylinder length=".06" radius=".035"/>
      </geometry>
    </collision>
    <collision name="right_front_track_collision">
      <origin rpy="-1.3293  0      0" xyz="0      -0.12157  0.0277"/>
      <geometry>
        <box size="0.06 0.07 0.2233"/>
      </geometry>
    </collision>
    <collision name="right_front_track_collision_2">
      <origin rpy="1.3293  0      0" xyz="0      -0.12157 -0.0257"/>
      <geometry>
        <box size="0.06 0.07 0.23"/>
      </geometry>
    </collision>
    <visual name="visual">
      <origin rpy="0  0  0" xyz="0    -0.115  0.001"/>
      <geometry>
        <box size=".002 .23 .05"/>
      </geometry>
    </visual>
    <visual name="visual_right_front_arm_wheel_1">
      <origin rpy="3.14159 -1.57079  3.14159" xyz="0     0     0.001"/>
      <geometry>
        <cylinder length=".06" radius=".09"/>
      </geometry>
    </visual>
    <visual name="visual_right_front_arm_wheel_2">
      <origin rpy="3.14159 -1.57079  3.14159" xyz="0    -0.23   0.001"/>
      <geometry>
        <cylinder length=".06" radius=".035"/>
      </geometry>
    </visual>
    <visual name="right_front_track_visual">
      <origin rpy="-1.3293  0      0" xyz="0      -0.12157  0.0277"/>
      <geometry>
        <box size="0.06 0.07 0.2233"/>
      </geometry>
    </visual>
    <visual name="right_front_track_visual_2">
      <origin rpy="1.3293  0      0" xyz="0      -0.12157 -0.0257"/>
      <geometry>
        <box size="0.06 0.07 0.23"/>
      </geometry>
    </visual>
  </link>
  <link name="left_front_arm">
    <inertial>
      <mass value="1.0"/>
      <origin rpy="1.57  0    1.57" xyz="-0.015  0     0"/>
      <inertia ixx="6.8125e-4" ixy="0" ixz="0" iyy="3.96253e-3" iyz="0" izz="4.53125e-3"/>
    </inertial>
    <collision name="collision_left_front_arm_wheel_1">
      <origin rpy="3.14159 -1.57079  3.14159" xyz="0     0    -0.001"/>
      <geometry>
        <cylinder length=".06" radius=".09"/>
      </geometry>
    </collision>
    <collision name="collision_left_front_arm_wheel_2">
      <origin rpy="3.14159 -1.57079  3.14159" xyz="0    -0.23  -0.001"/>
      <geometry>
        <cylinder length=".06" radius=".035"/>
      </geometry>
    </collision>
    <collision name="left_front_track_collision">
      <origin rpy="-1.3293  0      0" xyz="0      -0.12157  0.0257"/>
      <geometry>
        <box size="0.06 0.07 0.2233"/>
      </geometry>
    </collision>
    <collision name="left_front_track_collision_2">
      <origin rpy="1.3293  0      0" xyz="0      -0.12157 -0.0277"/>
      <geometry>
        <box size="0.06 0.07 0.23"/>
      </geometry>
    </collision>
    <visual name="visual">
      <origin rpy="0  0  0" xyz="0    -0.115 -0.001"/>
      <geometry>
        <box size=".002 .23 .05"/>
      </geometry>
    </visual>
    <visual name="visual_left_front_arm_wheel_1">
      <origin rpy="3.14159 -1.57079  3.14159" xyz="0     0    -0.001"/>
      <geometry>
        <cylinder length=".06" radius=".09"/>
      </geometry>
    </visual>
    <visual name="visual_left_front_arm_wheel_2">
      <origin rpy="3.14159 -1.57079  3.14159" xyz="0    -0.23  -0.001"/>
      <geometry>
        <cylinder length=".06" radius=".035"/>
      </geometry>
    </visual>
    <visual name="left_front_track_visual">
      <origin rpy="-1.3293  0      0" xyz="0      -0.12157  0.0257"/>
      <geometry>
        <box size="0.06 0.07 0.2233"/>
      </geometry>
    </visual>
    <visual name="left_front_track_visual_2">
      <origin rpy="1.3293  0      0" xyz="0      -0.12157 -0.0277"/>
      <geometry>
        <box size="0.06 0.07 0.23"/>
      </geometry>
    </visual>
  </link>
  <transmission name="left_rear_track_trans">
        <type>transmission_interface/SimpleTransmission</type>
        <actuator name="$left_rear_track_motor">
          <mechanicalReduction>1</mechanicalReduction>
        </actuator>
        <joint name="left_rear_track_j">
          <hardwareInterface>PositionJointInterface</hardwareInterface>
        </joint>
  </transmission>
  <transmission name="right_rear_track_trans">
        <type>transmission_interface/SimpleTransmission</type>
        <actuator name="$right_rear_track_motor">
          <mechanicalReduction>1</mechanicalReduction>
        </actuator>
        <joint name="right_rear_track_j">
          <hardwareInterface>PositionJointInterface</hardwareInterface>
        </joint>
  </transmission>
  <transmission name="left_front_track_trans">
        <type>transmission_interface/SimpleTransmission</type>
        <actuator name="$left_front_track_motor">
          <mechanicalReduction>1</mechanicalReduction>
        </actuator>
        <joint name="left_front_track_j">
          <hardwareInterface>PositionJointInterface</hardwareInterface>
        </joint>
  </transmission>
  <transmission name="right_front_track_trans">
        <type>transmission_interface/SimpleTransmission</type>
        <actuator name="$right_front_track_motor">
          <mechanicalReduction>1</mechanicalReduction>
        </actuator>
        <joint name="right_front_track_j">
          <hardwareInterface>PositionJointInterface</hardwareInterface>
        </joint>
  </transmission>

  <gazebo reference="left_track_j">
    <disableFixedJointLumping>true</disableFixedJointLumping>
  </gazebo>

  <gazebo reference="right_track_j">
    <disableFixedJointLumping>true</disableFixedJointLumping>
  </gazebo>

  <gazebo>
        <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
          <robotNamespace>/</robotNamespace>
        </plugin>
  </gazebo>
  <gazebo>
        
        <plugin filename="/home/alberto/code/gazebo/build/plugins/libSimpleTrackedVehiclePlugin.so" name="simple_tracked_vehicle">
                <body>base_link</body>
                <left_track>left_track</left_track>
                <right_track>right_track</right_track>
                <rear_left_track>left_rear_arm</rear_left_track>
                <rear_right_track>right_rear_arm</rear_right_track>
                <front_left_track>left_front_arm</front_left_track>
                <front_right_track>right_front_arm</front_right_track>
                <track_mu>2</track_mu>
                <track_mu2>0.5</track_mu2>
        </plugin>
  </gazebo>
  <gazebo>
        <plugin filename="libKeysToCmdVelPlugin.so" name="keyboard_control">
            <cmd_vel_topic>~/robot/cmd_vel</cmd_vel_topic>
        </plugin>
  </gazebo>
</robot>
